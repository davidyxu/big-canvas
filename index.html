<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
  var socket = io.connect('http://localhost:8080');
  fromX = null
  socket.on('connect', function(){
    // call the server-side function 'adduser' and send one parameter (value of prompt)
    console.log("connected")
  });

  socket.on('updatecanvas', function(data) {
  	context.beginPath();
		context.moveTo(data.fromX, data.fromY);
		context.lineTo(data.toX, data.toY);
		context.stroke();
		context.closePath();
  });

  $(function() {
  	context = $('canvas')[0].getContext("2d");
		context.strokeStyle = "red";
		context.lineWidth = 1.0;
		context.lineJoin = "round";

		$('canvas').mousedown(function(e) {
			console.log(e.clientX)
			fromX = e.clientX
			fromY = e.clientY
			console.log(e.clientY)
		});
		$('canvas').mousemove(function(e) {
			if (fromX) {
				toX = e.clientX
				toY = e.clientY
				socket.emit('draw', {
					fromX:fromX,
					fromY:fromY,
					toX: toX,
					toY: toY	
				})
				fromX = toX
				fromY = toY
			}
		});

		$(document).mouseup(function(e) {
			fromX = null;
			fromY = null;
		});
		$(document).keydown(function(e) {
			socket.emit('somestuff', "test")
		});
  });
</script>
</head>
<body>
<canvas id="myCanvas" width="600" height="600"
style="border:1px solid #000000;">
</canvas>
</body>
</html>